!function(){new Vue({el:"#proposal",data:{jobId:_jobId,userId:_userId,job:{},proposals:{},comments:{},commentData:{description:"",proposal_id:null,disableSendButton:!0}},mounted:function(){var o=this;o.getJob(),o.loadNiceScroll()},methods:{getJob:function(){var o=this,t=window.location.origin+"/json/proposal/job/"+o.jobId;o.$http.get(t).then(function(t){o.job=t.data},function(o){swal("Ooops...","Ainda não existe(m) proposta(s) para este trabalho","warning").then(function(){window.location.href=window.location.origin+"/user/job/client"})})},submitComment:function(o){var t=this,n=window.location.origin+"/json/proposal/comment";t.proposal!=={}&&(t.commentData.proposal_id=o,t.$http.post(n,JSON.stringify(t.commentData),{headers:{"X-CSRF-TOKEN":_csrf_token}}).then(function(o){t.commentData.description="",t.getJob()}))},enableSendButton:function(){var o=this;if(o.commentData.description.length>0)return void(o.commentData.disableSendButton=!1);o.commentData.disableSendButton=!0},isMe:function(o){return o==this.userId},loadNiceScroll:function(){setInterval(function(){"complete"===document.readyState&&$.fn.niceScroll&&$(".nicescroll").niceScroll({cursorcolor:"#98a6ad",cursorwidth:"6px",cursorborderradius:"5px"})},500)},acceptProposal:function(o){var t=this,n=window.location.origin+"/user/proposal/accept";swal({title:"Você está certo disto?",text:"Deseja aceitar a proposta de "+o.user.name+"?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger m-l-10",confirmButtonText:"Sim",cancelButtonText:"Cancelar"}).then(function(){t.$http.post(n,{_method:"PUT",id:o.id},{headers:{"X-CSRF-TOKEN":_csrf_token}}).then(function(o){t.commentData.description="",t.getJob(),swal("Proposta aceita!","Proposta aceita com sucesso.","success")},function(o){swal("Oops, algo deu errado...",o.body.error,"error")})})}}})}();